/*
 Highcharts Gantt JS v9.0.1 (2021-03-26)

 Tree Grid

 (c) 2016-2021 Jon Arild Nygard

 License: www.highcharts.com/license
*/
(function(b){"object"===typeof module&&module.exports?(b["default"]=b,module.exports=b):"function"===typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(B){b(B);b.Highcharts=B;return b}):b("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(b){function B(b,t,v,q){b.hasOwnProperty(t)||(b[t]=q.apply(null,v))}b=b?b._modules:{};B(b,"Gantt/Tree.js",[b["Core/Utilities.js"]],function(b){var t=b.extend,v=b.isNumber,q=b.pick,p=function(b,n){var l=b.reduce(function(d,
l){var m=q(l.parent,"");"undefined"===typeof d[m]&&(d[m]=[]);d[m].push(l);return d},{});Object.keys(l).forEach(function(d,b){var m=l[d];""!==d&&-1===n.indexOf(d)&&(m.forEach(function(d){b[""].push(d)}),delete b[d])});return l},n=function(b,p,l,d,y,m){var k=0,u=0,r=m&&m.after,a=m&&m.before;p={data:d,depth:l-1,id:b,level:l,parent:p};var g,e;"function"===typeof a&&a(p,m);a=(y[b]||[]).map(function(c){var f=n(c.id,b,l+1,c,y,m),h=c.start;c=!0===c.milestone?h:c.end;g=!v(g)||h<g?h:g;e=!v(e)||c>e?c:e;k=k+
1+f.descendants;u=Math.max(f.height+1,u);return f});d&&(d.start=q(d.start,g),d.end=q(d.end,e));t(p,{children:a,descendants:k,height:u});"function"===typeof r&&r(p,m);return p};return{getListOfParents:p,getNode:n,getTree:function(b,q){var l=b.map(function(d){return d.id});b=p(b,l);return n("",null,1,null,b,q)}}});B(b,"Core/Axis/TreeGridTick.js",[b["Core/Color/Palette.js"],b["Core/Utilities.js"]],function(b,t){var v=t.addEvent,q=t.isObject,p=t.isNumber,n=t.pick,z=t.wrap,x;(function(l){function d(){this.treeGrid||
(this.treeGrid=new r(this))}function y(a,g){a=a.treeGrid;var e=!a.labelIcon,c=g.renderer,f=g.xy,h=g.options,A=h.width||0,C=h.height||0,d=f.x-A/2-(h.padding||0);f=f.y-C/2;var k=g.collapsed?90:180,l=g.show&&p(f),m=a.labelIcon;m||(a.labelIcon=m=c.path(c.symbols[h.type](h.x||0,h.y||0,A,C)).addClass("highcharts-label-icon").add(g.group));m.attr({y:l?0:-9999});c.styledMode||m.attr({cursor:"pointer",fill:n(g.color,b.neutralColor60),"stroke-width":1,stroke:h.lineColor,strokeWidth:h.lineWidth||0});m[e?"attr":
"animate"]({translateX:d,translateY:f,rotation:k})}function m(a,g,e,c,f,h,A,C,d){var k=n(this.options&&this.options.labels,h);h=this.pos;var m=this.axis,l="treegrid"===m.options.type;a=a.apply(this,[g,e,c,f,k,A,C,d]);l&&(g=k&&q(k.symbol,!0)?k.symbol:{},k=k&&p(k.indentation)?k.indentation:0,h=(h=(m=m.treeGrid.mapOfPosToGridNode)&&m[h])&&h.depth||1,a.x+=(g.width||0)+2*(g.padding||0)+(h-1)*k);return a}function k(a){var g=this,e=g.pos,c=g.axis,f=g.label,h=c.treeGrid.mapOfPosToGridNode,A=c.options,C=n(g.options&&
g.options.labels,A&&A.labels),d=C&&q(C.symbol,!0)?C.symbol:{},k=(h=h&&h[e])&&h.depth;A="treegrid"===A.type;var m=-1<c.tickPositions.indexOf(e);e=c.chart.styledMode;A&&h&&f&&f.element&&f.addClass("highcharts-treegrid-node-level-"+k);a.apply(g,Array.prototype.slice.call(arguments,1));A&&f&&f.element&&h&&h.descendants&&0<h.descendants&&(c=c.treeGrid.isCollapsed(h),y(g,{color:!e&&f.styles&&f.styles.color||"",collapsed:c,group:f.parentGroup,options:d,renderer:f.renderer,show:m,xy:f.xy}),d="highcharts-treegrid-node-"+
(c?"expanded":"collapsed"),f.addClass("highcharts-treegrid-node-"+(c?"collapsed":"expanded")).removeClass(d),e||f.css({cursor:"pointer"}),[f,g.treeGrid.labelIcon].forEach(function(c){c&&!c.attachedTreeGridEvents&&(v(c.element,"mouseover",function(){f.addClass("highcharts-treegrid-node-active");f.renderer.styledMode||f.css({textDecoration:"underline"})}),v(c.element,"mouseout",function(){var c=q(C.style)?C.style:{};f.removeClass("highcharts-treegrid-node-active");f.renderer.styledMode||f.css({textDecoration:c.textDecoration})}),
v(c.element,"click",function(){g.treeGrid.toggleCollapse()}),c.attachedTreeGridEvents=!0)}))}var u=!1;l.compose=function(a){u||(v(a,"init",d),z(a.prototype,"getLabelPosition",m),z(a.prototype,"renderLabel",k),a.prototype.collapse=function(a){this.treeGrid.collapse(a)},a.prototype.expand=function(a){this.treeGrid.expand(a)},a.prototype.toggleCollapse=function(a){this.treeGrid.toggleCollapse(a)},u=!0)};var r=function(){function a(a){this.tick=a}a.prototype.collapse=function(a){var e=this.tick,c=e.axis,
f=c.brokenAxis;f&&c.treeGrid.mapOfPosToGridNode&&(e=c.treeGrid.collapse(c.treeGrid.mapOfPosToGridNode[e.pos]),f.setBreaks(e,n(a,!0)))};a.prototype.expand=function(a){var e=this.tick,c=e.axis,f=c.brokenAxis;f&&c.treeGrid.mapOfPosToGridNode&&(e=c.treeGrid.expand(c.treeGrid.mapOfPosToGridNode[e.pos]),f.setBreaks(e,n(a,!0)))};a.prototype.toggleCollapse=function(a){var e=this.tick,c=e.axis,f=c.brokenAxis;f&&c.treeGrid.mapOfPosToGridNode&&(e=c.treeGrid.toggleCollapse(c.treeGrid.mapOfPosToGridNode[e.pos]),
f.setBreaks(e,n(a,!0)))};return a}();l.Additions=r})(x||(x={}));return x});B(b,"Mixins/TreeSeries.js",[b["Core/Color/Color.js"],b["Core/Utilities.js"]],function(b,t){var v=t.extend,q=t.isArray,p=t.isNumber,n=t.isObject,z=t.merge,x=t.pick;return{getColor:function(l,d){var n=d.index,m=d.mapOptionsToLevel,k=d.parentColor,u=d.parentColorIndex,r=d.series,a=d.colors,g=d.siblings,e=r.points,c=r.chart.options.chart,f;if(l){e=e[l.i];l=m[l.level]||{};if(m=e&&l.colorByPoint){var h=e.index%(a?a.length:c.colorCount);
var A=a&&a[h]}if(!r.chart.styledMode){a=e&&e.options.color;c=l&&l.color;if(f=k)f=(f=l&&l.colorVariation)&&"brightness"===f.key?b.parse(k).brighten(n/g*f.to).get():k;f=x(a,c,A,f,r.color)}var C=x(e&&e.options.colorIndex,l&&l.colorIndex,h,u,d.colorIndex)}return{color:f,colorIndex:C}},getLevelOptions:function(l){var d=null;if(n(l)){d={};var b=p(l.from)?l.from:1;var m=l.levels;var k={};var u=n(l.defaults)?l.defaults:{};q(m)&&(k=m.reduce(function(d,a){if(n(a)&&p(a.level)){var g=z({},a);var e="boolean"===
typeof g.levelIsConstant?g.levelIsConstant:u.levelIsConstant;delete g.levelIsConstant;delete g.level;a=a.level+(e?0:b-1);n(d[a])?v(d[a],g):d[a]=g}return d},{}));m=p(l.to)?l.to:1;for(l=0;l<=m;l++)d[l]=z({},u,n(k[l])?k[l]:{})}return d},setTreeValues:function m(d,b){var k=b.before,u=b.idRoot,r=b.mapIdToNode[u],a=b.points[d.i],g=a&&a.options||{},e=0,c=[];d.levelDynamic=d.level-(("boolean"===typeof b.levelIsConstant?b.levelIsConstant:1)?0:r.level);d.name=x(a&&a.name,"");d.visible=u===d.id||("boolean"===
typeof b.visible?b.visible:!1);"function"===typeof k&&(d=k(d,b));d.children.forEach(function(f,a){var h=v({},b);v(h,{index:a,siblings:d.children.length,visible:d.visible});f=m(f,h);c.push(f);f.visible&&(e+=f.val)});d.visible=0<e||d.visible;k=x(g.value,e);d.children=c;d.childrenTotal=e;d.isLeaf=d.visible&&!e;d.val=k;return d},updateRootId:function(d){if(n(d)){var b=n(d.options)?d.options:{};b=x(d.rootNode,b.rootId,"");n(d.userOptions)&&(d.userOptions.rootId=b);d.rootNode=b}return b}}});B(b,"Core/Axis/GridAxis.js",
[b["Core/Axis/Axis.js"],b["Core/Globals.js"],b["Core/Axis/Tick.js"],b["Core/Utilities.js"]],function(b,t,v,q){var p=q.addEvent,n=q.defined,z=q.erase,x=q.find,l=q.isArray,d=q.isNumber,y=q.merge,m=q.pick,k=q.timeUnits,u=q.wrap,r=t.Chart;"";b.prototype.getMaxLabelDimensions=function(e,c){var f={width:0,height:0};c.forEach(function(c){c=e[c];if(q.isObject(c,!0)){var a=q.isObject(c.label,!0)?c.label:{};c=a.getBBox?a.getBBox().height:0;a.textStr&&!d(a.textPxLength)&&(a.textPxLength=a.getBBox().width);var h=
d(a.textPxLength)?Math.round(a.textPxLength):0;a.textStr&&(h=Math.round(a.getBBox().width));f.height=Math.max(c,f.height);f.width=Math.max(h,f.width)}});return f};t.dateFormats.W=function(a){a=new this.Date(a);var c=(this.get("Day",a)+6)%7,f=new this.Date(a.valueOf());this.set("Date",f,this.get("Date",a)-c+3);c=new this.Date(this.get("FullYear",f),0,1);4!==this.get("Day",c)&&(this.set("Month",a,0),this.set("Date",a,1+(11-this.get("Day",c))%7));return(1+Math.floor((f.valueOf()-c.valueOf())/6048E5)).toString()};
t.dateFormats.E=function(a){return this.dateFormat("%a",a,!0).charAt(0)};p(r,"afterSetChartSize",function(){this.axes.forEach(function(a){(a.grid&&a.grid.columns||[]).forEach(function(c){c.setAxisSize();c.setAxisTranslation()})})});p(v,"afterGetLabelPosition",function(a){var c=this.label,f=this.axis,h=f.reversed,e=f.chart,b=f.options.grid||{},k=f.options.labels,m=k.align,l=g.Side[f.side],r=a.tickmarkOffset,w=f.tickPositions,D=this.pos-r;w=d(w[a.index+1])?w[a.index+1]-r:f.max+r;var E=f.tickSize("tick");
r=E?E[0]:0;E=E?E[1]/2:0;if(!0===b.enabled){if("top"===l){b=f.top+f.offset;var F=b-r}else"bottom"===l?(F=e.chartHeight-f.bottom+f.offset,b=F+r):(b=f.top+f.len-f.translate(h?w:D),F=f.top+f.len-f.translate(h?D:w));"right"===l?(l=e.chartWidth-f.right+f.offset,h=l+r):"left"===l?(h=f.left+f.offset,l=h-r):(l=Math.round(f.left+f.translate(h?w:D))-E,h=Math.round(f.left+f.translate(h?D:w))-E);this.slotWidth=h-l;a.pos.x="left"===m?l:"right"===m?h:l+(h-l)/2;a.pos.y=F+(b-F)/2;e=e.renderer.fontMetrics(k.style.fontSize,
c.element);c=c.getBBox().height;k.useHTML?a.pos.y+=e.b+-(c/2):(c=Math.round(c/e.h),a.pos.y+=(e.b-(e.h-e.f))/2+-((c-1)*e.h/2));a.pos.x+=f.horiz&&k.x||0}});p(v,"labelFormat",function(a){var c,f=a.axis,h=a.value;if(null===(c=f.options.grid)||void 0===c?0:c.enabled){var e=f.tickPositions;c=(f.linkedParent||f).series[0];var b=h===e[0];e=h===e[e.length-1];var d=c&&x(c.options.data,function(c){return c[f.isXAxis?"x":"y"]===h}),g=void 0;d&&c.is("gantt")&&(g=y(d),t.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(g));
a.isFirst=b;a.isLast=e;a.point=g}});var a=function(){function a(c){this.axis=c}a.prototype.isOuterAxis=function(){var c=this.axis,a=c.grid.columnIndex,h=c.linkedParent&&c.linkedParent.grid.columns||c.grid.columns,e=a?c.linkedParent:c,b=-1,g=0;c.chart[c.coll].forEach(function(a,f){a.side!==c.side||a.options.isInternal||(g=f,a===e&&(b=f))});return g===b&&(d(a)?h.length===a:!0)};a.prototype.renderBorder=function(c){var a=this.axis,e=a.chart.renderer,b=a.options;c=e.path(c).addClass("highcharts-axis-line").add(a.axisBorder);
e.styledMode||c.attr({stroke:b.lineColor,"stroke-width":b.lineWidth,zIndex:7});return c};return a}(),g=function(){function e(){}e.compose=function(c){b.keepProps.push("grid");u(c.prototype,"unsquish",e.wrapUnsquish);p(c,"init",e.onInit);p(c,"afterGetOffset",e.onAfterGetOffset);p(c,"afterGetTitlePosition",e.onAfterGetTitlePosition);p(c,"afterInit",e.onAfterInit);p(c,"afterRender",e.onAfterRender);p(c,"afterSetAxisTranslation",e.onAfterSetAxisTranslation);p(c,"afterSetOptions",e.onAfterSetOptions);
p(c,"afterSetOptions",e.onAfterSetOptions2);p(c,"afterSetScale",e.onAfterSetScale);p(c,"afterTickSize",e.onAfterTickSize);p(c,"trimTicks",e.onTrimTicks);p(c,"destroy",e.onDestroy)};e.onAfterGetOffset=function(){var c=this.grid;(c&&c.columns||[]).forEach(function(c){c.getOffset()})};e.onAfterGetTitlePosition=function(c){if(!0===(this.options.grid||{}).enabled){var a=this.axisTitle,h=this.height,b=this.horiz,g=this.left,d=this.offset,k=this.opposite,l=this.options,r=this.top,w=this.width,D=this.tickSize(),
E=a&&a.getBBox().width,F=l.title.x,u=l.title.y,n=m(l.title.margin,b?5:10);a=this.chart.renderer.fontMetrics(l.title.style.fontSize,a).f;D=(b?r+h:g)+(b?1:-1)*(k?-1:1)*(D?D[0]/2:0)+(this.side===e.Side.bottom?a:0);c.titlePosition.x=b?g-(E||0)/2-n+F:D+(k?w:0)+d+F;c.titlePosition.y=b?D-(k?h:0)+(k?a:-a)/2+d+u:r-n+u}};e.onAfterInit=function(){var c=this.chart,a=this.options.grid;a=void 0===a?{}:a;var e=this.userOptions;if(a.enabled){var g=this.options;g.labels.align=m(g.labels.align,"center");this.categories||
(g.showLastLabel=!1);this.labelRotation=0;g.labels.rotation=0}if(a.columns){g=this.grid.columns=[];for(var d=this.grid.columnIndex=0;++d<a.columns.length;){var k=y(e,a.columns[a.columns.length-d-1],{linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete k.grid.columns;k=new b(this.chart,k);k.grid.isColumn=!0;k.grid.columnIndex=d;z(c.axes,k);z(c[this.coll],k);g.push(k)}}};e.onAfterRender=function(){var a,f=this.grid,h=this.options;if(!0===(h.grid||{}).enabled){this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,
this.tickPositions);this.rightWall&&this.rightWall.destroy();if(this.grid&&this.grid.isOuterAxis()&&this.axisLine&&(h=h.lineWidth)){h=this.getLinePath(h);var b=h[0],g=h[1],d=((this.tickSize("tick")||[1])[0]-1)*(this.side===e.Side.top||this.side===e.Side.left?-1:1);"M"===b[0]&&"L"===g[0]&&(this.horiz?(b[2]+=d,g[2]+=d):(b[1]+=d,g[1]+=d));!this.horiz&&this.chart.marginRight&&(b=[b,["L",this.left,b[2]]],d=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(this.max+this.tickmarkOffset)],g=
[["M",g[1],this.toPixels(this.max+this.tickmarkOffset)],d],this.grid.upperBorder||0===this.min%1||(this.grid.upperBorder=this.grid.renderBorder(b)),this.grid.upperBorder&&this.grid.upperBorder.animate({d:b}),this.grid.lowerBorder||0===this.max%1||(this.grid.lowerBorder=this.grid.renderBorder(g)),this.grid.lowerBorder&&this.grid.lowerBorder.animate({d:g}));this.grid.axisLineExtra?this.grid.axisLineExtra.animate({d:h}):this.grid.axisLineExtra=this.grid.renderBorder(h);this.axisLine[this.showAxis?"show":
"hide"](!0)}(f&&f.columns||[]).forEach(function(a){a.render()});!this.horiz&&this.chart.hasRendered&&(this.scrollbar||(null===(a=this.linkedParent)||void 0===a?0:a.scrollbar))&&(a=this.max,f=this.tickmarkOffset,h=this.tickPositions[this.tickPositions.length-1],g=this.tickPositions[0],this.min-g>f?this.ticks[g].label.hide():this.ticks[g].label.show(),h-a>f?this.ticks[h].label.hide():this.ticks[h].label.show(),h-a<f&&0<h-a&&this.ticks[h].isLast?this.ticks[h].mark.hide():this.ticks[h-1]&&this.ticks[h-
1].mark.show())}};e.onAfterSetAxisTranslation=function(){var a,f=this.tickPositions&&this.tickPositions.info,e=this.options,b=this.userOptions.labels||{};(e.grid||{}).enabled&&(this.horiz?(this.series.forEach(function(a){a.options.pointRange=0}),f&&e.dateTimeLabelFormats&&e.labels&&!n(b.align)&&(!1===e.dateTimeLabelFormats[f.unitName].range||1<f.count)&&(e.labels.align="left",n(b.x)||(e.labels.x=3))):"treegrid"!==this.options.type&&(null===(a=this.grid)||void 0===a?0:a.columns)&&(this.minPointOffset=
this.tickInterval))};e.onAfterSetOptions=function(a){var c=this.options;a=a.userOptions;var e=c&&q.isObject(c.grid,!0)?c.grid:{};if(!0===e.enabled){var b=y(!0,{className:"highcharts-grid-axis "+(a.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",
[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},a);"xAxis"===this.coll&&(n(a.linkedTo)&&!n(a.tickPixelInterval)&&(b.tickPixelInterval=350),n(a.tickPixelInterval)||!n(a.linkedTo)||n(a.tickPositioner)||n(a.tickInterval)||(b.tickPositioner=function(a,c){var f=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(f){var e,h=b.units;for(e=0;e<h.length;e++)if(h[e][0]===f.unitName){var g=e;break}if(h[g+
1]){var d=h[g+1][0];var l=(h[g+1][1]||[1])[0]}else"year"===f.unitName&&(d="year",l=10*f.count);f=k[d];this.tickInterval=f*l;return this.getTimeTicks({unitRange:f,count:l,unitName:d},a,c,this.options.startOfWeek)}}));y(!0,this.options,b);this.horiz&&(c.minPadding=m(a.minPadding,0),c.maxPadding=m(a.maxPadding,0));d(c.grid.borderWidth)&&(c.tickWidth=c.lineWidth=e.borderWidth)}};e.onAfterSetOptions2=function(a){a=(a=a.userOptions)&&a.grid||{};var c=a.columns;a.enabled&&c&&y(!0,this.options,c[c.length-
1])};e.onAfterSetScale=function(){(this.grid.columns||[]).forEach(function(a){a.setScale()})};e.onAfterTickSize=function(a){var c=b.defaultLeftAxisOptions,e=this.horiz,g=this.maxLabelDimensions,d=this.options.grid;d=void 0===d?{}:d;d.enabled&&g&&(c=2*Math.abs(c.labels.x),e=e?d.cellHeight||c+g.height:c+g.width,l(a.tickSize)?a.tickSize[0]=e:a.tickSize=[e,0])};e.onDestroy=function(a){var c=this.grid;(c.columns||[]).forEach(function(c){c.destroy(a.keepEvents)});c.columns=void 0};e.onInit=function(c){c=
c.userOptions||{};var e=c.grid||{};e.enabled&&n(e.borderColor)&&(c.tickColor=c.lineColor=e.borderColor);this.grid||(this.grid=new a(this))};e.onTrimTicks=function(){var a=this.options,e=this.categories,h=this.tickPositions,b=h[0],g=h[h.length-1],d=this.linkedParent&&this.linkedParent.min||this.min,k=this.linkedParent&&this.linkedParent.max||this.max,l=this.tickInterval;!0!==(a.grid||{}).enabled||e||!this.horiz&&!this.isLinked||(b<d&&b+l>d&&!a.startOnTick&&(h[0]=d),g>k&&g-l<k&&!a.endOnTick&&(h[h.length-
1]=k))};e.wrapUnsquish=function(a){var c=this.options.grid;return!0===(void 0===c?{}:c).enabled&&this.categories?this.tickInterval:a.apply(this,Array.prototype.slice.call(arguments,1))};return e}();(function(a){a=a.Side||(a.Side={});a[a.top=0]="top";a[a.right=1]="right";a[a.bottom=2]="bottom";a[a.left=3]="left"})(g||(g={}));g.compose(b);return g});B(b,"Core/Axis/BrokenAxis.js",[b["Core/Axis/Axis.js"],b["Core/Series/Series.js"],b["Extensions/Stacking.js"],b["Core/Utilities.js"]],function(b,t,v,q){var p=
q.addEvent,n=q.find,z=q.fireEvent,x=q.isArray,l=q.isNumber,d=q.pick,y=function(){function m(b){this.hasBreaks=!1;this.axis=b}m.isInBreak=function(b,d){var k=b.repeat||Infinity,a=b.from,g=b.to-b.from;d=d>=a?(d-a)%k:k-(a-d)%k;return b.inclusive?d<=g:d<g&&0!==d};m.lin2Val=function(b){var d=this.brokenAxis;d=d&&d.breakArray;if(!d||!l(b))return b;var k;for(k=0;k<d.length;k++){var a=d[k];if(a.from>=b)break;else a.to<b?b+=a.len:m.isInBreak(a,b)&&(b+=a.len)}return b};m.val2Lin=function(b){var d=this.brokenAxis;
d=d&&d.breakArray;if(!d||!l(b))return b;var k=b,a;for(a=0;a<d.length;a++){var g=d[a];if(g.to<=b)k-=g.len;else if(g.from>=b)break;else if(m.isInBreak(g,b)){k-=b-g.from;break}}return k};m.prototype.findBreakAt=function(b,d){return n(d,function(d){return d.from<b&&b<d.to})};m.prototype.isInAnyBreak=function(b,n){var k=this.axis,a=k.options.breaks||[],g=a.length,e;if(g&&l(b)){for(;g--;)if(m.isInBreak(a[g],b)){var c=!0;e||(e=d(a[g].showPoints,!k.isXAxis))}var f=c&&n?c&&!e:c}return f};m.prototype.setBreaks=
function(k,n){var r=this,a=r.axis,g=x(k)&&!!k.length;a.isDirty=r.hasBreaks!==g;r.hasBreaks=g;a.options.breaks=a.userOptions.breaks=k;a.forceRedraw=!0;a.series.forEach(function(a){a.isDirty=!0});g||a.val2lin!==m.val2Lin||(delete a.val2lin,delete a.lin2val);g&&(a.userOptions.ordinal=!1,a.lin2val=m.lin2Val,a.val2lin=m.val2Lin,a.setExtremes=function(a,c,d,g,l){if(r.hasBreaks){for(var e,f=this.options.breaks;e=r.findBreakAt(a,f);)a=e.to;for(;e=r.findBreakAt(c,f);)c=e.from;c<a&&(c=a)}b.prototype.setExtremes.call(this,
a,c,d,g,l)},a.setAxisTranslation=function(){b.prototype.setAxisTranslation.call(this);r.unitLength=void 0;if(r.hasBreaks){var e=a.options.breaks||[],c=[],f=[],g=0,k,n=a.userMin||a.min,p=a.userMax||a.max,q=d(a.pointRangePadding,0),t;e.forEach(function(a){k=a.repeat||Infinity;l(n)&&l(p)&&(m.isInBreak(a,n)&&(n+=a.to%k-n%k),m.isInBreak(a,p)&&(p-=p%k-a.from%k))});e.forEach(function(a){w=a.from;k=a.repeat||Infinity;if(l(n)&&l(p)){for(;w-k>n;)w-=k;for(;w<n;)w+=k;for(t=w;t<p;t+=k)c.push({value:t,move:"in"}),
c.push({value:t+a.to-a.from,move:"out",size:a.breakSize})}});c.sort(function(a,c){return a.value===c.value?("in"===a.move?0:1)-("in"===c.move?0:1):a.value-c.value});var u=0;var w=n;c.forEach(function(a){u+="in"===a.move?1:-1;1===u&&"in"===a.move&&(w=a.value);0===u&&l(w)&&(f.push({from:w,to:a.value,len:a.value-w-(a.size||0)}),g+=a.value-w-(a.size||0))});r.breakArray=f;l(n)&&l(p)&&l(a.min)&&(r.unitLength=p-n-g+q,z(a,"afterBreaks"),a.staticScale?a.transA=a.staticScale:r.unitLength&&(a.transA*=(p-a.min+
q)/r.unitLength),q&&(a.minPixelPadding=a.transA*(a.minPointOffset||0)),a.min=n,a.max=p)}});d(n,!0)&&a.chart.redraw()};return m}();q=function(){function b(){}b.compose=function(b,m){b.keepProps.push("brokenAxis");var k=t.prototype;k.drawBreaks=function(a,b){var e=this,c=e.points,f,g,k,m;if(a&&a.brokenAxis&&a.brokenAxis.hasBreaks){var n=a.brokenAxis;b.forEach(function(b){f=n&&n.breakArray||[];g=a.isXAxis?a.min:d(e.options.threshold,a.min);c.forEach(function(c){m=d(c["stack"+b.toUpperCase()],c[b]);f.forEach(function(b){if(l(g)&&
l(m)){k=!1;if(g<b.from&&m>b.to||g>b.from&&m<b.from)k="pointBreak";else if(g<b.from&&m>b.from&&m<b.to||g>b.from&&m>b.to&&m<b.from)k="pointInBreak";k&&z(a,k,{point:c,brk:b})}})})})}};k.gappedPath=function(){var a=this.currentDataGrouping,b=a&&a.gapSize;a=this.options.gapSize;var e=this.points.slice(),c=e.length-1,d=this.yAxis,h;if(a&&0<c)for("value"!==this.options.gapUnit&&(a*=this.basePointRange),b&&b>a&&b>=this.basePointRange&&(a=b),h=void 0;c--;)h&&!1!==h.visible||(h=e[c+1]),b=e[c],!1!==h.visible&&
!1!==b.visible&&(h.x-b.x>a&&(h=(b.x+h.x)/2,e.splice(c+1,0,{isNull:!0,x:h}),d.stacking&&this.options.stacking&&(h=d.stacking.stacks[this.stackKey][h]=new v(d,d.options.stackLabels,!1,h,this.stack),h.total=0)),h=b);return this.getGraphPath(e)};p(b,"init",function(){this.brokenAxis||(this.brokenAxis=new y(this))});p(b,"afterInit",function(){"undefined"!==typeof this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)});p(b,"afterSetTickPositions",function(){var a=this.brokenAxis;if(a&&a.hasBreaks){var b=
this.tickPositions,e=this.tickPositions.info,c=[],d;for(d=0;d<b.length;d++)a.isInAnyBreak(b[d])||c.push(b[d]);this.tickPositions=c;this.tickPositions.info=e}});p(b,"afterSetOptions",function(){this.brokenAxis&&this.brokenAxis.hasBreaks&&(this.options.ordinal=!1)});p(m,"afterGeneratePoints",function(){var a=this.options.connectNulls,b=this.points,d=this.xAxis,c=this.yAxis;if(this.isDirty)for(var f=b.length;f--;){var h=b[f],k=!(null===h.y&&!1===a)&&(d&&d.brokenAxis&&d.brokenAxis.isInAnyBreak(h.x,!0)||
c&&c.brokenAxis&&c.brokenAxis.isInAnyBreak(h.y,!0));h.visible=k?!1:!1!==h.options.visible}});p(m,"afterRender",function(){this.drawBreaks(this.xAxis,["x"]);this.drawBreaks(this.yAxis,d(this.pointArrayMap,["y"]))})};return b}();q.compose(b,t);return q});B(b,"Core/Axis/TreeGridAxis.js",[b["Core/Axis/Axis.js"],b["Core/Axis/Tick.js"],b["Gantt/Tree.js"],b["Core/Axis/TreeGridTick.js"],b["Mixins/TreeSeries.js"],b["Core/Utilities.js"]],function(b,t,v,q,p,n){var z=p.getLevelOptions,x=n.addEvent,l=n.find,d=
n.fireEvent,y=n.isArray,m=n.isObject,k=n.isString,u=n.merge,r=n.pick,a=n.wrap,g;(function(b){function c(a,b){var c=a.collapseStart||0;a=a.collapseEnd||0;a>=b&&(c-=.5);return{from:c,to:a,showPoints:!1}}function e(a,b,c){var d=[],e=[],f={},g={},h=-1,D="boolean"===typeof b?b:!1;a=v.getTree(a,{after:function(a){a=g[a.pos];var b=0,c=0;a.children.forEach(function(a){c+=(a.descendants||0)+1;b=Math.max((a.height||0)+1,b)});a.descendants=c;a.height=b;a.collapsed&&e.push(a)},before:function(a){var b=m(a.data,
!0)?a.data:{},c=k(b.name)?b.name:"",e=f[a.parent];e=m(e,!0)?g[e.pos]:null;var n=function(a){return a.name===c},p;D&&m(e,!0)&&(p=l(e.children,n))?(n=p.pos,p.nodes.push(a)):n=h++;g[n]||(g[n]=p={depth:e?e.depth+1:0,name:c,id:b.id,nodes:[a],children:[],pos:n},-1!==n&&d.push(c),m(e,!0)&&e.children.push(p));k(a.id)&&(f[a.id]=a);p&&!0===b.collapsed&&(p.collapsed=!0);a.pos=n}});g=function(a,b){var c=function(a,e,d){var f=e+(-1===e?0:b-1),g=(f-e)/2,h=e+g;a.nodes.forEach(function(a){var b=a.data;m(b,!0)&&(b.y=
e+(b.seriesIndex||0),delete b.seriesIndex);a.pos=h});d[h]=a;a.pos=h;a.tickmarkOffset=g+.5;a.collapseStart=f+.5;a.children.forEach(function(a){c(a,f+1,d);f=(a.collapseEnd||0)-.5});a.collapseEnd=f+.5;return d};return c(a["-1"],-1,{})}(g,c);return{categories:d,mapOfIdToNode:f,mapOfPosToGridNode:g,collapsedNodes:e,tree:a}}function g(a){a.target.axes.filter(function(a){return"treegrid"===a.options.type}).forEach(function(b){var c=b.options||{},d=c.labels,f=c.uniqueNames,g=0;c=c.max;if(!b.treeGrid.mapOfPosToGridNode||
b.series.some(function(a){return!a.hasRendered||a.isDirtyData||a.isDirty})){var h=b.series.reduce(function(a,b){b.visible&&((b.options.data||[]).forEach(function(c){b.options.keys&&b.options.keys.length&&(c=b.pointClass.prototype.optionsToObject.call({series:b},c),b.pointClass.setGanttPointAliases(c));m(c,!0)&&(c.seriesIndex=g,a.push(c))}),!0===f&&g++);return a},[]);if(c&&h.length<c)for(var k=h.length;k<=c;k++)h.push({name:k+"\u200b"});c=e(h,f||!1,!0===f?g:1);b.categories=c.categories;b.treeGrid.mapOfPosToGridNode=
c.mapOfPosToGridNode;b.hasNames=!0;b.treeGrid.tree=c.tree;b.series.forEach(function(a){var b=(a.options.data||[]).map(function(b){y(b)&&a.options.keys&&a.options.keys.length&&h.forEach(function(a){0<=b.indexOf(a.x)&&0<=b.indexOf(a.x2)&&(b=a)});return m(b,!0)?u(b):b});a.visible&&a.setData(b,!1)});b.treeGrid.mapOptionsToLevel=z({defaults:d,from:1,levels:d&&d.levels,to:b.treeGrid.tree&&b.treeGrid.tree.height});"beforeRender"===a.type&&(b.treeGrid.collapsedNodes=c.collapsedNodes)}})}function n(a,b){var c=
this.treeGrid.mapOptionsToLevel||{},d=this.ticks,e=d[b],f;if("treegrid"===this.options.type&&this.treeGrid.mapOfPosToGridNode){var g=this.treeGrid.mapOfPosToGridNode[b];(c=c[g.depth])&&(f={labels:c});e?(e.parameters.category=g.name,e.options=f,e.addLabel()):d[b]=new t(this,b,void 0,void 0,{category:g.name,tickmarkOffset:g.tickmarkOffset,options:f})}else a.apply(this,Array.prototype.slice.call(arguments,1))}function p(a){var b=this.options,c=a.apply(this,Array.prototype.slice.call(arguments,1));if("treegrid"===
b.type&&this.treeGrid.mapOfPosToGridNode){var e=this.treeGrid.mapOfPosToGridNode[-1].height||0;c.width+=b.labels.indentation*(e-1)}return c}function B(a,b,c){var d=this,f="treegrid"===c.type;d.treeGrid||(d.treeGrid=new H(d));f&&(x(b,"beforeRender",g),x(b,"beforeRedraw",g),x(b,"addSeries",function(a){a.options.data&&(a=e(a.options.data,c.uniqueNames||!1,1),d.treeGrid.collapsedNodes=(d.treeGrid.collapsedNodes||[]).concat(a.collapsedNodes))}),x(d,"foundExtremes",function(){d.treeGrid.collapsedNodes&&
d.treeGrid.collapsedNodes.forEach(function(a){var b=d.treeGrid.collapse(a);d.brokenAxis&&(d.brokenAxis.setBreaks(b,!1),d.treeGrid.collapsedNodes&&(d.treeGrid.collapsedNodes=d.treeGrid.collapsedNodes.filter(function(b){return a.collapseStart!==b.collapseStart||a.collapseEnd!==b.collapseEnd})))})}),x(d,"afterBreaks",function(){"yAxis"===d.coll&&!d.staticScale&&d.chart.options.chart.height&&(d.isDirty=!0)}),c=u({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],
symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},c,{reversed:!0,grid:{columns:void 0}}));a.apply(d,[b,c]);f&&(d.hasNames=!0,d.options.showLastLabel=!0)}function I(a){var b=this.options;"treegrid"===b.type?(this.min=r(this.userMin,b.min,this.dataMin),this.max=r(this.userMax,b.max,this.dataMax),d(this,"foundExtremes"),this.setAxisTranslation(),this.tickmarkOffset=.5,this.tickInterval=1,this.tickPositions=this.treeGrid.mapOfPosToGridNode?this.treeGrid.getTickPositions():
[]):a.apply(this,Array.prototype.slice.call(arguments,1))}var G=!1;b.compose=function(b){G||(a(b.prototype,"generateTick",n),a(b.prototype,"getMaxLabelDimensions",p),a(b.prototype,"init",B),a(b.prototype,"setTickInterval",I),q.compose(t),G=!0)};var H=function(){function a(a){this.axis=a}a.prototype.setCollapsedStatus=function(a){var b=this.axis,c=b.chart;b.series.forEach(function(b){var d=b.options.data;if(a.id&&d){var e=c.get(a.id);b=d[b.data.indexOf(e)];e&&b&&(e.collapsed=a.collapsed,b.collapsed=
a.collapsed)}})};a.prototype.collapse=function(a){var b=this.axis,d=b.options.breaks||[],e=c(a,b.max);d.push(e);a.collapsed=!0;b.treeGrid.setCollapsedStatus(a);return d};a.prototype.expand=function(a){var b=this.axis,d=b.options.breaks||[],e=c(a,b.max);a.collapsed=!1;b.treeGrid.setCollapsedStatus(a);return d.reduce(function(a,b){b.to===e.to&&b.from===e.from||a.push(b);return a},[])};a.prototype.getTickPositions=function(){var a=this.axis,b=Math.floor(a.min/a.tickInterval)*a.tickInterval,c=Math.ceil(a.max/
a.tickInterval)*a.tickInterval;return Object.keys(a.treeGrid.mapOfPosToGridNode||{}).reduce(function(d,e){e=+e;!(e>=b&&e<=c)||a.brokenAxis&&a.brokenAxis.isInAnyBreak(e)||d.push(e);return d},[])};a.prototype.isCollapsed=function(a){var b=this.axis,d=b.options.breaks||[],e=c(a,b.max);return d.some(function(a){return a.from===e.from&&a.to===e.to})};a.prototype.toggleCollapse=function(a){return this.isCollapsed(a)?this.expand(a):this.collapse(a)};return a}();b.Additions=H})(g||(g={}));b.prototype.utils=
{getNode:v.getNode};g.compose(b);return g});B(b,"masters/modules/treegrid.src.js",[],function(){})});
//# sourceMappingURL=treegrid.js.map