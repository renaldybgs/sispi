/*
 Highstock JS v9.0.1 (2021-03-26)

 Data grouping module

 (c) 2010-2021 Torstein Hnsi

 License: www.highcharts.com/license
*/
(function(d){"object"===typeof module&&module.exports?(d["default"]=d,module.exports=d):"function"===typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(p){d(p);d.Highcharts=p;return d}):d("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(d){function p(d,p,w,x){d.hasOwnProperty(p)||(d[p]=x.apply(null,w))}d=d?d._modules:{};p(d,"Extensions/DataGrouping.js",[d["Core/Axis/Axis.js"],d["Core/Axis/DateTimeAxis.js"],d["Core/Globals.js"],d["Core/Options.js"],
d["Core/Series/Point.js"],d["Core/Series/Series.js"],d["Core/Tooltip.js"],d["Core/Utilities.js"]],function(d,p,w,x,L,F,M,f){var h=F.prototype,y=f.addEvent,E=f.arrayMax,N=f.arrayMin,O=f.correctFloat,G=f.defined,P=f.error,Q=f.extend,R=f.format,r=f.isNumber,H=f.merge,I=f.pick;"";var g=w.approximations={sum:function(a){var c=a.length;if(!c&&a.hasNulls)var b=null;else if(c)for(b=0;c--;)b+=a[c];return b},average:function(a){var c=a.length;a=g.sum(a);r(a)&&c&&(a=O(a/c));return a},averages:function(){var a=
[];[].forEach.call(arguments,function(c){a.push(g.average(c))});return"undefined"===typeof a[0]?void 0:a},open:function(a){return a.length?a[0]:a.hasNulls?null:void 0},high:function(a){return a.length?E(a):a.hasNulls?null:void 0},low:function(a){return a.length?N(a):a.hasNulls?null:void 0},close:function(a){return a.length?a[a.length-1]:a.hasNulls?null:void 0},ohlc:function(a,c,b,v){a=g.open(a);c=g.high(c);b=g.low(b);v=g.close(v);if(r(a)||r(c)||r(b)||r(v))return[a,c,b,v]},range:function(a,c){a=g.low(a);
c=g.high(c);if(r(a)||r(c))return[a,c];if(null===a&&null===c)return null}};f=function(a,c,b,v){var d,e=this,t=e.data,z=e.options&&e.options.data,n=[],f=[],u=[],m=a.length,p=!!c,k=[],h=e.pointArrayMap,w=h&&h.length,y=["x"].concat(h||["y"]),A=this.options.dataGrouping&&this.options.dataGrouping.groupAll,B=0,C=0,q;v="function"===typeof v?v:g[v]?g[v]:g[e.getDGApproximation&&e.getDGApproximation()||"average"];w?h.forEach(function(){k.push([])}):k.push([]);var E=w||1;for(q=0;q<=m&&!(a[q]>=b[0]);q++);for(q;q<=
m;q++){for(;"undefined"!==typeof b[B+1]&&a[q]>=b[B+1]||q===m;){var l=b[B];e.dataGroupInfo={start:A?C:e.cropStart+C,length:k[0].length};var D=v.apply(e,k);e.pointClass&&!G(e.dataGroupInfo.options)&&(e.dataGroupInfo.options=H(e.pointClass.prototype.optionsToObject.call({series:e},e.options.data[e.cropStart+C])),y.forEach(function(a){delete e.dataGroupInfo.options[a]}));"undefined"!==typeof D&&(n.push(l),f.push(D),u.push(e.dataGroupInfo));C=q;for(l=0;l<E;l++)k[l].length=0,k[l].hasNulls=!1;B+=1;if(q===
m)break}if(q===m)break;if(h)for(l=(null===(d=e.options.dataGrouping)||void 0===d?0:d.groupAll)?q:e.cropStart+q,D=t&&t[l]||e.pointClass.prototype.applyOptions.apply({series:e},[z[l]]),l=0;l<w;l++){var x=D[h[l]];r(x)?k[l].push(x):null===x&&(k[l].hasNulls=!0)}else l=p?c[q]:null,r(l)?k[0].push(l):null===l&&(k[0].hasNulls=!0)}return{groupedXData:n,groupedYData:f,groupMap:u}};var J={approximations:g,groupData:f},S=h.processData,T=h.generatePoints,A={groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L",
"%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},K={line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},
candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5}},U=w.defaultDataGroupingUnits=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]];h.getDGApproximation=function(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("column")?"sum":"average"};h.groupData=f;h.processData=function(){var a=this.chart,c=this.options.dataGrouping,b=!1!==this.allowDG&&
c&&I(c.enabled,a.options.isStock),d=this.visible||!a.options.chart.ignoreHiddenSeries,f,e=this.currentDataGrouping,t=!1;this.forceCrop=b;this.groupPixelWidth=null;this.hasProcessed=!0;b&&!this.requireSorting&&(this.requireSorting=t=!0);b=!1===S.apply(this,arguments)||!b;t&&(this.requireSorting=!1);if(!b){this.destroyGroupedData();b=c.groupAll?this.xData:this.processedXData;var z=c.groupAll?this.yData:this.processedYData,n=a.plotSizeX;a=this.xAxis;var g=a.options.ordinal,u=this.groupPixelWidth=a.getGroupPixelWidth&&
a.getGroupPixelWidth();if(u&&b&&b.length){this.isDirty=f=!0;this.points=null;t=a.getExtremes();var m=t.min;t=t.max;g=g&&a.ordinal&&a.ordinal.getGroupIntervalFactor(m,t,this)||1;u=u*(t-m)/n*g;n=a.getTimeTicks(p.AdditionsClass.prototype.normalizeTimeTickInterval(u,c.units||U),Math.min(m,b[0]),Math.max(t,b[b.length-1]),a.options.startOfWeek,b,this.closestPointRange);g=h.groupData.apply(this,[b,z,n,c.approximation]);b=g.groupedXData;z=g.groupedYData;var r=0;if(c.smoothed&&b.length){var k=b.length-1;for(b[k]=
Math.min(b[k],t);k--&&0<k;)b[k]+=u/2;b[0]=Math.max(b[0],m)}for(k=1;k<n.length;k++)n.info.segmentStarts&&-1!==n.info.segmentStarts.indexOf(k)||(r=Math.max(n[k]-n[k-1],r));m=n.info;m.gapSize=r;this.closestPointRange=n.info.totalRange;this.groupMap=g.groupMap;if(G(b[0])&&b[0]<a.min&&d){if(!G(a.options.min)&&a.min<=a.dataMin||a.min===a.dataMin)a.min=Math.min(b[0],a.min);a.dataMin=Math.min(b[0],a.dataMin)}c.groupAll&&(c=this.cropData(b,z,a.min,a.max,1),b=c.xData,z=c.yData,this.cropStart=c.start);this.processedXData=
b;this.processedYData=z}else this.groupMap=null;this.hasGroupedData=f;this.currentDataGrouping=m;this.preventGraphAnimation=(e&&e.totalRange)!==(m&&m.totalRange)}};h.destroyGroupedData=function(){this.groupedData&&(this.groupedData.forEach(function(a,c){a&&(this.groupedData[c]=a.destroy?a.destroy():null)},this),this.groupedData.length=0)};h.generatePoints=function(){T.apply(this);this.destroyGroupedData();this.groupedData=this.hasGroupedData?this.points:null};y(L,"update",function(){if(this.dataGroup)return P(24,
!1,this.series.chart),!1});y(M,"headerFormatter",function(a){var c=this.chart,b=c.time,d=a.labelConfig,f=d.series,e=f.tooltipOptions,g=f.options.dataGrouping,h=e.xDateFormat,n=f.xAxis,p=e[(a.isFooter?"footer":"header")+"Format"];if(n&&"datetime"===n.options.type&&g&&r(d.key)){var u=f.currentDataGrouping;g=g.dateTimeLabelFormats||A.dateTimeLabelFormats;if(u)if(e=g[u.unitName],1===u.count)h=e[0];else{h=e[1];var m=e[2]}else!h&&g&&(h=this.getXDateFormat(d,e,n));h=b.dateFormat(h,d.key);m&&(h+=b.dateFormat(m,
d.key+u.totalRange-1));f.chart.styledMode&&(p=this.styledModeFormat(p));a.text=R(p,{point:Q(d.point,{key:h}),series:f},c);a.preventDefault()}});y(F,"destroy",h.destroyGroupedData);y(F,"afterSetOptions",function(a){a=a.options;var c=this.type,b=this.chart.options.plotOptions,d=x.defaultOptions.plotOptions[c].dataGrouping,f=this.useCommonDataGrouping&&A;if(K[c]||f)d||(d=H(A,K[c])),a.dataGrouping=H(f,d,b.series&&b.series.dataGrouping,b[c].dataGrouping,this.userOptions.dataGrouping)});y(d,"afterSetScale",
function(){this.series.forEach(function(a){a.hasProcessed=!1})});d.prototype.getGroupPixelWidth=function(){var a=this.series,c=a.length,b,d=0,f=!1,e;for(b=c;b--;)(e=a[b].options.dataGrouping)&&(d=Math.max(d,I(e.groupPixelWidth,A.groupPixelWidth)));for(b=c;b--;)(e=a[b].options.dataGrouping)&&a[b].hasProcessed&&(c=(a[b].processedXData||a[b].data).length,a[b].groupPixelWidth||c>this.chart.plotSizeX/d||c&&e.forced)&&(f=!0);return f?d:0};d.prototype.setDataGrouping=function(a,c){var b;c=I(c,!0);a||(a=
{forced:!1,units:null});if(this instanceof d)for(b=this.series.length;b--;)this.series[b].update({dataGrouping:a},!1);else this.chart.options.series.forEach(function(b){b.dataGrouping=a},!1);this.ordinal&&(this.ordinal.slope=void 0);c&&this.chart.redraw()};w.dataGrouping=J;"";return J});p(d,"masters/modules/datagrouping.src.js",[d["Extensions/DataGrouping.js"]],function(d){return d})});
//# sourceMappingURL=datagrouping.js.map